<div [class]="columnClasses()" [attr.data-column-id]="columnId()">
  <!-- Column Header -->
  <div class="kanban-column-header">
    <span class="column-title">{{ title() }}</span>
    <span class="column-count" [attr.aria-label]="count() + ' items'">{{ count() }}</span>

    <!-- Collapse toggle button -->
    <button
      class="collapse-toggle"
      (click)="onToggleCollapse($event)"
      [attr.aria-expanded]="!collapsed()"
      [attr.aria-label]="collapsed() ? 'Expand ' + title() : 'Collapse ' + title()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        @if (collapsed()) {
          <path d="M9 18L15 12L9 6" stroke-linecap="round" stroke-linejoin="round"/>
        } @else {
          <path d="M6 9L12 15L18 9" stroke-linecap="round" stroke-linejoin="round"/>
        }
      </svg>
    </button>
  </div>

  <!-- Column Body (Drop Zone) - Hidden when collapsed -->
  @if (!collapsed()) {
    <div
      [class]="bodyClasses()"
      (dragover)="onDragOver($event)"
      (dragenter)="onDragEnter($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)"
      role="region"
      [attr.aria-label]="title() + ' column with ' + count() + ' items'">

      <!-- Content projection for cards -->
      <ng-content></ng-content>

      <!-- Empty state slot -->
      @if (count() === 0) {
        <ng-content select="[empty-state]"></ng-content>
      }
    </div>
  }
</div>
